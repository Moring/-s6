services:
  agentic-proxy:
    image: traefik/whoami
    restart: unless-stopped
    labels:
      - traefik.enable=true

      # Router
      - traefik.http.routers.agentic.rule=Host(`agentic.digimuse.ai`)
      - traefik.http.routers.agentic.entrypoints=websecure
      - traefik.http.routers.agentic.tls.certresolver=le

      # Backend service â†’ external machine
      - traefik.http.services.agentic.loadbalancer.server.url=http://turing.appliedautonomics.com:8000

      # Health check
      - traefik.http.services.agentic.loadbalancer.healthcheck.path=/api/healthz/
      - traefik.http.services.agentic.loadbalancer.healthcheck.hostname=agentic.digimuse.ai
      - traefik.http.services.agentic.loadbalancer.healthcheck.interval=10s
      - traefik.http.services.agentic.loadbalancer.healthcheck.timeout=3s
