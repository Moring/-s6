{% load static %}
<!-- Topbar Start -->
<div class="navbar-custom">
    <div class="topbar">
        <div class="topbar-menu d-flex align-items-center gap-lg-2 gap-1">

            <!-- Topbar Brand Logo -->
            <div class="logo-box">
                <!-- Brand Logo Light -->
                <a href="{% url 'ui:dashboard' %}" class="logo-light">
                    <img src="{% static 'images/logo.png' %}" alt="logo" class="logo-lg" height="28">
                    <img src="{% static 'images/logo-sm.png' %}" alt="small logo" class="logo-sm" height="28">
                </a>

                <!-- Brand Logo Dark -->
                <a href="{% url 'ui:dashboard' %}" class="logo-dark">
                    <img src="{% static 'images/logo-black.png' %}" alt="dark logo" class="logo-lg" height="28">
                    <img src="{% static 'images/logo-sm.png' %}" alt="small logo" class="logo-sm" height="28">
                </a>
            </div>

            <!-- Sidebar Menu Toggle Button -->
            <button class="button-toggle-menu">
                <i class="ti ti-menu-4"></i>
            </button>

        </div>

        <ul class="topbar-menu d-flex align-items-center gap-4">

            <!-- Status Bar: Reserve Balance + Token Counts -->
            <li class="d-none d-md-inline-block" 
                hx-get="{% url 'api_proxy:status_bar' %}" 
                hx-trigger="load, every 30s" 
                hx-swap="innerHTML">
                <div class="d-flex align-items-center gap-3 px-3">
                    <div class="text-center">
                        <span class="text-muted fs-12 d-block">Reserve</span>
                        <span class="fw-semibold text-dark">—</span>
                    </div>
                    <div class="vr"></div>
                    <div class="text-center">
                        <span class="text-muted fs-12 d-block">Tokens</span>
                        <span class="fw-semibold text-dark">—</span>
                    </div>
                    <div class="text-muted fs-11">
                        <i class="ti ti-clock me-1"></i><span>—</span>
                    </div>
                </div>
            </li>

            <!-- Notifications Dropdown -->
            <li class="dropdown notification-list">
                <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                    <i class="ti ti-bell fs-22"></i>
                    <span class="badge bg-danger rounded-circle noti-icon-badge">0</span>
                </a>
                <div class="dropdown-menu dropdown-menu-end dropdown-lg">
                    <!-- Notification Header -->
                    <div class="dropdown-header noti-title">
                        <h6 class="text-overflow m-0">Notifications</h6>
                    </div>

                    <div class="noti-scroll" data-simplebar>
                        <div class="text-center p-3 text-muted">
                            <p class="mb-0">No notifications</p>
                        </div>
                    </div>

                    <!-- View All -->
                    <a href="javascript:void(0);" class="dropdown-item text-center text-primary text-decoration-underline fw-semibold notify-all py-2">
                        View all
                        <i class="ti ti-arrow-right ms-1"></i>
                    </a>
                </div>
            </li>

            <!-- User Dropdown -->
            <li class="dropdown">
                <a class="nav-link dropdown-toggle nav-user me-0" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                    <span class="account-user-avatar">
                        <img src="{% static 'images/users/user-2.jpg' %}" alt="user-image" width="32" class="rounded-circle">
                    </span>
                    <span class="d-none d-xl-block ms-2">
                        <span class="fw-semibold d-block">{{ user.get_full_name|default:user.username }}</span>
                        <span class="fs-12">{{ user.profile.tenant.name|default:"User" }}</span>
                    </span>
                </a>
                <div class="dropdown-menu dropdown-menu-end">
                    <!-- Dropdown Header -->
                    <div class="dropdown-header noti-title">
                        <h6 class="text-overflow m-0">Welcome !</h6>
                    </div>

                    <!-- Profile -->
                    <a href="{% url 'accounts:profile' %}" class="dropdown-item">
                        <i class="ti ti-user-circle me-2 fs-17 align-middle"></i>
                        <span class="align-middle">My Profile</span>
                    </a>

                    <!-- Billing -->
                    <a href="{% url 'billing:settings' %}" class="dropdown-item">
                        <i class="ti ti-credit-card me-2 fs-17 align-middle"></i>
                        <span class="align-middle">Billing & Reserve</span>
                    </a>

                    <!-- Divider -->
                    <div class="dropdown-divider"></div>

                    <!-- Logout -->
                    <a href="{% url 'account:logout' %}" class="dropdown-item text-danger">
                        <i class="ti ti-logout-2 me-2 fs-17 align-middle"></i>
                        <span class="align-middle">Logout</span>
                    </a>
                </div>
            </li>

        </ul>
    </div>
</div>
<!-- end Topbar -->
