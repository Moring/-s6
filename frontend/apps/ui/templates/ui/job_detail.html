{% extends "base.html" %}

{% block title %}Job Detail - AfterResume{% endblock %}

{% block content %}
<div class="card">
    <h2>Job Detail</h2>
    
    {% if job %}
    <table style="width: auto;">
        <tr><th>ID:</th><td>{{ job.id }}</td></tr>
        <tr><th>Type:</th><td><code>{{ job.type }}</code></td></tr>
        <tr><th>Status:</th><td><span class="status {{ job.status }}">{{ job.status }}</span></td></tr>
        <tr><th>Created:</th><td>{{ job.created_at }}</td></tr>
    </table>
    
    {% if job.error %}
    <h3 style="margin-top: 20px;">Error</h3>
    <div class="alert alert-error">{{ job.error }}</div>
    {% endif %}
    {% else %}
    <p>Job not found.</p>
    {% endif %}
</div>

{% if events %}
<div class="card">
    <h2>Events ({{ events|length }})</h2>
    <table>
        <thead>
            <tr><th>Time</th><th>Level</th><th>Source</th><th>Message</th></tr>
        </thead>
        <tbody>
            {% for event in events %}
            <tr>
                <td>{{ event.timestamp|slice:":19" }}</td>
                <td><span class="status {{ event.level }}">{{ event.level }}</span></td>
                <td>{{ event.source }}</td>
                <td>{{ event.message }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

<p><a href="/jobs/" class="btn">‚Üê Back to Jobs</a></p>
{% endblock %}
